import{_ as i,c as a,a2 as e,o as n}from"./chunks/framework.BjqFKMAQ.js";const c=JSON.parse('{"title":"ä½ å¥½Jenkinsï¼Œä»¥[docker in docker]çš„æ–¹å¼è§é¢","description":"","frontmatter":{},"headers":[],"relativePath":"devops/hello-jenkins.md","filePath":"devops/hello-jenkins.md","lastUpdated":1728284321000}'),l={name:"devops/hello-jenkins.md"};function p(r,s,t,h,k,o){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ä½ å¥½jenkins-ä»¥-docker-in-docker-çš„æ–¹å¼è§é¢" tabindex="-1">ä½ å¥½Jenkinsï¼Œä»¥[docker in docker]çš„æ–¹å¼è§é¢ <a class="header-anchor" href="#ä½ å¥½jenkins-ä»¥-docker-in-docker-çš„æ–¹å¼è§é¢" aria-label="Permalink to &quot;ä½ å¥½Jenkinsï¼Œä»¥[docker in docker]çš„æ–¹å¼è§é¢&quot;">â€‹</a></h1><blockquote><p>åŸºäºdocker-composeå¿«é€Ÿæ„å»ºJenkinså®¹å™¨ï¼Œä¸”Jenkinså®¹å™¨ä¸å®¿ä¸»æœºdockerç¯å¢ƒè¿é€šï¼Œå®ç°ã€Œdocker in dockerã€ã€‚</p></blockquote><h2 id="é¡¹ç›®ç‰¹ç‚¹" tabindex="-1">é¡¹ç›®ç‰¹ç‚¹ <a class="header-anchor" href="#é¡¹ç›®ç‰¹ç‚¹" aria-label="Permalink to &quot;é¡¹ç›®ç‰¹ç‚¹&quot;">â€‹</a></h2><ul><li>ä½¿ç”¨dockeréƒ¨ç½²Jenkinsï¼Œä¸å®¿ä¸»æœºæ“ä½œç³»ç»Ÿéš”ç¦»ï¼Œä¿è¯ç³»ç»Ÿçš„éš”ç¦»æ€§å’Œæ•´æ´æ€§</li><li>è½»æ¾æ”¯æŒå¤šç‰ˆæœ¬ï¼Œä¸åŒæ“ä½œç³»ç»Ÿç¯å¢ƒè¿ç§»æ€§å¼ºï¼ˆå¯ç§»æ¤æ€§å¼ºï¼‰</li><li>Jenkinså®¹å™¨å†…ç½®dockerï¼Œç§°ä¸ºã€Œdocker in dockerã€ï¼Œä¸å¿…åœ¨Jenkinså†…éƒ¨å†å®‰è£…npm maven go mysqlç­‰ç¯å¢ƒä¾èµ–</li></ul><h2 id="å‰ç½®è¦æ±‚" tabindex="-1">å‰ç½®è¦æ±‚ <a class="header-anchor" href="#å‰ç½®è¦æ±‚" aria-label="Permalink to &quot;å‰ç½®è¦æ±‚&quot;">â€‹</a></h2><ol><li>é»˜è®¤åŸºç¡€ç¯å¢ƒï¼šamd64 Linuxï¼Œæ¨èä½¿ç”¨Ubuntu22.04</li><li>å®‰è£…dockerå’Œdocker-compose</li></ol><h2 id="å¿«é€Ÿå¼€å§‹" tabindex="-1">å¿«é€Ÿå¼€å§‹ <a class="header-anchor" href="#å¿«é€Ÿå¼€å§‹" aria-label="Permalink to &quot;å¿«é€Ÿå¼€å§‹&quot;">â€‹</a></h2><p>å…‹éš†é¡¹ç›®</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/xiaolinstar/docker-jenkins.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿›å…¥é¡¹ç›®</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ£€æŸ¥æŒ‚è½½å· ï¼Œæœ¬é¡¹ç›®ä¸­<code>docker-compose.yaml</code>ä¸­çš„æŒ‚è½½å·å€¼é»˜è®¤ä¸ºï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/usr/bin/docker:/usr/bin/docker&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/var/run/docker.sock:/var/run/docker.sock&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./jenkins_home:/var/jenkins_home&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ğŸ‘€åœ¨Windowsæˆ–macOSä¸­ä¸‹è½½Docker Desktopå¯èƒ½å­˜åœ¨å‚æ•°ä¸ä¸€è‡´ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥å¹¶é…Œæƒ…ä¿®æ”¹</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Macbook Pro M1pro </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Docker Desktop</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/usr/local/bin/docker:/usr/bin/docker&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~/.docker/run/docker.sock:/var/run/docker.sock&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./jenkins_home:/var/jenkins_home&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯åŠ¨å®¹å™¨</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºjenkins_homeå¹¶åœ¨åå°å¯åŠ¨dockerå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins_home</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ£€æŸ¥å®¹å™¨çŠ¶æ€</p><p>å¯åŠ¨çš„Jenkinså®¹å™¨åé»˜è®¤ä¸º<code>xiaolin-jenkins</code></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿›å…¥<code>xiaolin-jenkins</code>å®¹å™¨å†…éƒ¨ï¼ŒæŸ¥çœ‹<code>docker</code>å‘½ä»¤</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®¿ä¸»æœºæ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaolin-jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥Jenkinså®¹å™¨å†…dockerç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> info</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æŸ¥çœ‹åˆ°ç›¸åº”çš„è¾“å‡ºåˆ™æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</p><p>â—ï¸xiaolin-jenkinså®¹å™¨å†…çš„dockerç¯å¢ƒä¸å®¿ä¸»æœºæ˜¯ç›¸é€šçš„ï¼Œå…±äº«åŒä¸€ä¸ªdockerç¯å¢ƒã€‚å› æ­¤åœ¨xiaolin-jenkinså®¹å™¨å†…åˆ›å»ºçš„å®¹å™¨ï¼Œåœ¨å®¿ä¸»æœºä¸Šä¹Ÿèƒ½æŸ¥çœ‹åˆ°ã€‚</p><h2 id="jenkinså¿«é€Ÿä½“éªŒ" tabindex="-1">Jenkinså¿«é€Ÿä½“éªŒ <a class="header-anchor" href="#jenkinså¿«é€Ÿä½“éªŒ" aria-label="Permalink to &quot;Jenkinså¿«é€Ÿä½“éªŒ&quot;">â€‹</a></h2><p>Webä½“éªŒï¼Œé€šè¿‡æµè§ˆå™¨è¿›å…¥å®¿ä¸»æœº8080ç«¯å£</p><ul><li>äº‘æœåŠ¡ï¼š \${IP}:8080</li><li>æœ¬åœ°ï¼š <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a></li></ul><p>è·å–ç™»å½•å¯†é’¥ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ï¼Œè·å–ä¸€ä¸²å¯†é’¥ï¼Œç”¨äºWebç«¯ç™»å½•</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaolin-jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Jenkinsä»¥æ’ä»¶çš„æ–¹å¼æ”¯æŒåŠŸèƒ½æ‰©å±•ï¼Œç›®å‰å·²ç»æœ‰1000+æ’ä»¶ï¼Œé™¤äº†å®‰è£…ç¤¾åŒºæ¨èçš„æ’ä»¶å¤–ï¼Œå»ºè®®å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š</p><ul><li>Blue Ocean: BlueOcean Aggregator</li><li>Docker Commons: Provides the common shared functionality for various Docker-related plugins</li><li>Docker Compose Build Step: Docker Compose plugin for Jenkins</li></ul><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">â€‹</a></h2><ol><li><p>Jenkinsç”¨æˆ·æ‰‹å†Œï¼Œ<a href="https://www.jenkins.io/zh/doc/" target="_blank" rel="noreferrer">https://www.jenkins.io/zh/doc/</a></p></li><li><p>Blue Ocean UIï¼Œ<a href="https://www.jenkins.io/zh/doc/book/blueocean/" target="_blank" rel="noreferrer">https://www.jenkins.io/zh/doc/book/blueocean/</a></p></li><li><p>Dockerï¼Œ<a href="https://www.docker.com/" target="_blank" rel="noreferrer">https://www.docker.com/</a></p></li></ol><h2 id="è”ç³»ä½œè€…" tabindex="-1">è”ç³»ä½œè€… <a class="header-anchor" href="#è”ç³»ä½œè€…" aria-label="Permalink to &quot;è”ç³»ä½œè€…&quot;">â€‹</a></h2><p>å¦‚æœæ‚¨æœ‰éœ€è¦æŠ€æœ¯å’¨è¯¢ï¼Œæˆ–è€…æœ‰æƒ³æ³•ä½¿æœ¬æ–‡æ¡£å˜å¾—æ›´å¥½ã€‚</p><p>è”ç³»ä½œè€…ï¼šxing.xiaolin@foxmail.com</p>`,36)]))}const b=i(l,[["render",p]]);export{c as __pageData,b as default};
